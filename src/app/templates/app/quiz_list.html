{% extends 'base.html' %}
{% load static %}
{% block content %}
<img style="max-height: 300vh;position: absolute;" src="{% static 'app/images/Rectangle.png' %}" alt="">

<div class="container">


    <h1 class="mt-3">Quiz Disponibles</h1>
    <div class="d-flex justify-content-center align-items-center gap-3 mt-3">
        <h2 class="text-center text-nowrap">
            <i class="bi bi-patch-check"></i>
            Nos recommandations
        </h2>
        <div style="background: black; height: 3px;border-radius: 3px; width: 100%;"></div>
    </div>
    <div class="quiz-container mt-4 " data-card>

        {% for quiz in quizzes|slice:":6" %}
        <a class="carte" href="{% url 'take_quiz' quiz.id %}">

            <img class="carte-img" {%if quiz.image_url%}src="{{quiz.image_url}}"
                {%else%}src="{%static 'app/images/defaultimg.png'%}" {%endif%} alt="Title" />
            <div class="carte-body">
                <h4 class="carte-title text-center">{{quiz.title}}</h4>
                <p class="carte-text text-center">{{quiz.description}}</p>
            </div>
            <div class="carte-footer">
                <div class="niveau d-flex gap-2 ">
                    <div class="d-flex flex-nowrap">
                        {%if quiz.level == 1%}
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star"></i>
                        <i class="bi bi-star"></i>
                        {%elif quiz.level == 2%}
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star"></i>
                        {%elif quiz.level == 3%}
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        {%endif%}
                    </div>
                    <h5> - {{quiz.title}}</h5>
                </div>
            </div>
        </a>
        {%endfor%}
    </div>



    {% for theme, theme_quizzes in quizzes_by_theme %}
    <div class="theme-section mb-5">

        <div class="d-flex justify-content-center align-items-center gap-3 mt-3">

            <h2 class="text-center text-nowrap"> <i class="bi bi-collection"></i> {{ theme|default:"Sans th√®me" }}</h2>
            <div style="background: black; height: 3px;border-radius: 3px; width: 100%;"></div>
        </div>

        <div class="quiz-container">
            {% for quiz in theme_quizzes %}
            <a class="carte" href="{% url 'take_quiz' quiz.id %}">

                <img class="carte-img" {%if quiz.image_url%}src="{{quiz.image_url}}"
                    {%else%}src="{%static 'app/images/defaultimg.png'%}" {%endif%} alt="Title" />
                <div class="carte-body">
                    <h4 class="carte-title text-center">{{quiz.title}}</h4>
                    <p class="carte-text text-center">{{quiz.description}}</p>
                </div>
                <div class="carte-footer">
                    <div class="niveau d-flex gap-2 ">
                        <div class="d-flex flex-nowrap">
                            {%if quiz.level == 1%}
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star"></i>
                            <i class="bi bi-star"></i>
                            {%elif quiz.level == 2%}
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star"></i>
                            {%elif quiz.level == 3%}
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            {%endif%}
                        </div>
                        <h5> - {{quiz.title}}</h5>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
    {% endfor %}
</div>

<style>
    .quiz-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 2rem;
        margin-bottom: 3rem;
    }

    .quiz-container .carte {
        width: 310px;
        height: 310px;
        margin: 10px;
        transition: transform 0.3s;
        text-decoration: none;
    }

    .quiz-container .carte .carte-img {
        position: absolute;
        z-index: 0;
        width: 310px;
        height: 310px;
        object-fit: cover;
    }

    .quiz-container .carte .carte-body {
        opacity: 0;
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        z-index: 1;
        height: 100%;
        position: relative;
        background-image: url('{% static "app/images/topographyContact.svg" %}');
        background-size: cover;
        background-position: center bottom;
        background-repeat: no-repeat;
        transition: background-color 0.3s ease, transform 0.3s ease, background-position 0.5s ease;
        padding: 10px;

    }

    .quiz-container .carte .carte-footer {
        color: black;
    }

    .quiz-container .carte:hover .carte-body {
        opacity: 1;
        background-color: #332b2ac7;

        background-position: center top;
    }
</style>

{% endblock %}